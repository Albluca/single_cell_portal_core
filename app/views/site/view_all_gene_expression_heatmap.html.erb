<div class="row">
	<div class="col-md-10">
		<h1>Gene Expression for all genes</h1>
	</div>
	<div class="col-md-2">
		<%= render partial: 'back_link' %>
	</div>
</div>
<div class="row">
	<div class="col-sm-12">
		<%= render partial: 'gene_search_form' %>
		<div class='form-inline navigation-form'>
			<%= label_tag :centered, 'Row centering' %><br />
			<%= select_tag :centered, options_for_select([['No', 0],['Yes', 1]], params[:centered]), {class: 'form-control'} %>
		</div>

		<%= javascript_tag do %>

			$('#centered').change(function() {
				if ( $(this).val() == 1 ) {
					var newDataPath = '/data/<%= @study.url_safe_name %>/<%= @study.url_safe_name %>_row_centered.gct'
				} else {
					var newDataPath = '/data/<%= @study.url_safe_name %>/<%= @study.url_safe_name %>.gct'
				}

				var annotPath = '/data/<%= @study.url_safe_name %>/CLUSTER_AND_SUBCLUSTER_INDEX.txt';
				renderMorpheus(newDataPath, annotPath, '#heatmap-plot');
			});

		<% end %>

	</div>
</div>
<div class="row">
	<div class="col-md-12" id="heatmap-plot"></div>
</div>

<%= javascript_tag do %>

	$(document).ready(function() {

		if ( <%= params[:centered].to_i %> == 1 ) {
			var dataPath = '/data/<%= @study.url_safe_name %>/<%= @study.url_safe_name %>_row_centered.gct'
		} else {
			var dataPath = '/data/<%= @study.url_safe_name %>/<%= @study.url_safe_name %>.gct'
		}
		var annotPath = '/data/<%= @study.url_safe_name %>/CLUSTER_AND_SUBCLUSTER_INDEX.txt';
		renderMorpheus(dataPath, annotPath, '#heatmap-plot');
	});

<% end %>