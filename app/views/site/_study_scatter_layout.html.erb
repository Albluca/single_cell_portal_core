var size = $('#cluster-plot').actual('width') * SCATTER_RATIO;

var layout = {
    hovermode: 'closest',
    font: plotlyLabelFont,
    width: size,
    height: size,
    margin: {
        t: 20,
        r: 0,
        b: 20,
        l: 0
    }
}

<% if @cluster.cluster_type == '3d' %>
  var currentCamera = $('#cluster-plot').data('camera');
  layout.scene = {
      camera: currentCamera,
      xaxis: {
          range: <%= raw @range[:x] %>,
          title: '<%=  @axes[:x] %>',
          showticklabels: false
      },
      yaxis: {
          range: <%= raw @range[:y] %>,
          title: '<%= @axes[:y] %>',
          showticklabels: false
      },
      zaxis: {
          range: <%= raw @range[:z] %>,
          title: '<%= @axes[:z] %>',
          showticklabels: false
      },
      <% if @cluster.has_range? %>
        aspectmode: '<%= @aspect[:mode] %>',
        aspectratio: {
          x: <%= @aspect[:x] %>,
          y: <%= @aspect[:y] %>,
          z: <%= @aspect[:z] %>
        }
      <% else %>
        aspectmode: 'cube'
      <% end %>
  };

  <% if @cluster.has_coordinate_labels? %>
    layout.scene.annotations = <%= raw @coordinate_labels.to_json %>
  <% end %>

<% else %>
  layout.xaxis = {
      range: <%= raw @range[:x] %>,
      title: '<%=  @axes[:x] %>',
      showticklabels: false
  };

  layout.yaxis = {
      range: <%= raw @range[:y] %>,
      title: '<%= @axes[:y] %>',
      showticklabels: false
  };

  <% if @cluster.has_coordinate_labels? %>
    layout.annotations = <%= raw @coordinate_labels.to_json %>
  <% end %>
<% end %>